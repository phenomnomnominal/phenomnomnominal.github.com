<!DOCTYPE html>

<html>
<head>
  <title>complex.coffee</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="public/stylesheets/normalize.css" />
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div class="container">
    <div class="page">

      <div class="header">
        
          <h1>complex.coffee</h1>
        

        
          <div class="toc">
            <h3>Table of Contents</h3>
            <ol>
              
                
                <li>
                  <a class="source" href="algorithms.html">
                    algorithms.coffee
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="bra-ket.html">
                    bra-ket.coffee
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="complex.html">
                    complex.coffee
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="index.html">
                    index.coffee
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="matrix.html">
                    matrix.coffee
                  </a>
                </li>
              
            </ol>
          </div>
        
      </div>

      
        
        <h3 id="-quantum-computer-simulator-quantum-html-"><a href="../quantum.html">Quantum Computer Simulator</a></h3>
<p><em>complex.coffee</em> contains the <strong><code>Complex</code></strong> class.</p>
<hr>

        
      
        
        <h2 id="error-types-">Error Types:</h2>
<p>Some specific <strong><code>Error</code></strong> types for the <strong><code>Complex</code></strong> class:</p>

        
      
        
        <section id='cce'></section>

<ul>
<li><strong><code>ComplexConstructorError</code></strong>:</li>
</ul>
<blockquote>
<blockquote>
<p>These errors are thrown when something is wrong in the <a href="#complex"><strong><code>Complex</code></strong></a> constructor</p>
</blockquote>
</blockquote>

        
          <div class='highlight'><pre><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ComplexConstructorError</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Error</span></span></pre></div>
        
      
        
        <section id='cme'></section>

<ul>
<li><strong><code>ComplexMathError</code></strong>:</li>
</ul>
<blockquote>
<blockquote>
<p>These errors are thrown when something is mathematically wrong a <strong><code>Complex</code></strong> function</p>
</blockquote>
</blockquote>

        
          <div class='highlight'><pre><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ComplexMathError</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Error</span></span></pre></div>
        
      
        
        <hr>

        
      
        
        <h2 id="-section-id-complex-complex-section-"><section id='complex'>Complex:</section></h2>
<hr>
<p>The <strong><code>Complex</code></strong> class provides a representation of Complex numbers, stored as a real part and an imaginary part.</p>

        
          <div class='highlight'><pre><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Complex</span></span></pre></div>
        
      
        
        <h3 id="-constructor-"><em>constructor:</em></h3>
<blockquote>
<p>The <strong><code>Complex</code></strong> constructor can work in several ways:</p>
</blockquote>
<ol>
<li><p>It can take two <code>Numbers</code>, <code>r</code> and <code>i</code>, representing the <em>real</em> and <em>imaginary</em> parts respectively.</p>
</li>
<li><p>It can take an exisitng <strong><code>Complex</code></strong>, and leave it as it is.</p>
</li>
<li><p>It can take a <code>String</code> in the form <em>a + bi</em></p>
</li>
</ol>
<blockquote>
<p>If the arguments are of the incorrect types or in the wrong format, the constructor will throw a <a href="#cce"><strong><code>ComplexConstructorError</code></strong></a>.</p>
</blockquote>

        
          <div class='highlight'><pre>  <span class="hljs-attribute">constructor</span>: <span class="hljs-function"><span class="hljs-params">(r = <span class="hljs-keyword">new</span> Complex(<span class="hljs-number">0</span>), i = <span class="hljs-number">0</span>)</span> -&gt;</span>
    <span class="hljs-keyword">if</span> _.isNumber(r) <span class="hljs-keyword">and</span> _.isNumber(i)
      <span class="hljs-property">@r</span> = r
      <span class="hljs-property">@i</span> = i
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> _.isString r
      <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> _.isNaN +r
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Complex(+r)
      regexRealImag = <span class="hljs-regexp">/^([-+]?(?:\d+|\d*\.\d+)+)([-+]?(?:\d+|\d*\.\d+)?)?[i]$/i</span>
      regexImag = <span class="hljs-regexp">/^([-+]?(?:\d+|\d*\.\d+)?)?[i]$/i</span>
      string = r.replace <span class="hljs-regexp">/\s+/g</span>, <span class="hljs-string">""</span>
      realImag = string.match regexRealImag
      imag = string.match regexImag
      <span class="hljs-keyword">unless</span> realImag? <span class="hljs-keyword">or</span> imag?
        <span class="hljs-keyword">throw</span> ComplexConstructorError <span class="hljs-string">'Invalid string input: expecting a +/- bi format.'</span>
      <span class="hljs-keyword">if</span> realImag?
        [ari, bri, cri] = realImag
      <span class="hljs-keyword">if</span> imag?
        [ai, bi] = imag
      <span class="hljs-keyword">if</span> realImag? <span class="hljs-keyword">and</span> imag?
        
        <span class="hljs-property">@r</span> = <span class="hljs-number">0</span>
        <span class="hljs-property">@i</span> = +bi
      <span class="hljs-keyword">if</span> realImag? <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> imag?
        <span class="hljs-keyword">if</span> cri <span class="hljs-keyword">is</span> <span class="hljs-string">'-'</span>
          cri = -<span class="hljs-number">1</span>
        <span class="hljs-keyword">if</span> cri <span class="hljs-keyword">is</span> <span class="hljs-string">'+'</span>
          cri = <span class="hljs-number">1</span>
        <span class="hljs-property">@r</span> = +bri
        <span class="hljs-property">@i</span> = +cri
      <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> realImag? <span class="hljs-keyword">and</span> imag?
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> bi?
          <span class="hljs-property">@r</span> = <span class="hljs-number">0</span>
          <span class="hljs-property">@i</span> = <span class="hljs-number">1</span>
        <span class="hljs-keyword">if</span> bi <span class="hljs-keyword">is</span> <span class="hljs-string">'-'</span>
          <span class="hljs-property">@r</span> = <span class="hljs-number">0</span>
          <span class="hljs-property">@i</span> = -<span class="hljs-number">1</span>
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> r <span class="hljs-keyword">instanceof</span> Complex
      <span class="hljs-property">@r</span> = r.r
      <span class="hljs-property">@i</span> = r.i
    <span class="hljs-keyword">else</span>
      <span class="hljs-keyword">throw</span> ComplexConstructorError <span class="hljs-string">'Incorrect Complex constructor arguments.'</span></pre></div>
        
      
        
        <hr>
<h3 id="utility-functions-">Utility Functions:</h3>

        
      
        
        <h3 id="-tostring-"><em>toString:</em></h3>
<blockquote>
<p><strong><code>toString</code></strong> overrides the default <code>Object</code> implementation of <strong><code>toString</code></strong> to provide a readable, limited precision representation of a <strong><code>Complex</code></strong></p>
</blockquote>

        
          <div class='highlight'><pre>  <span class="hljs-attribute">toString</span>:<span class="hljs-function"> -&gt;</span>
    r = <span class="hljs-keyword">if</span> <span class="hljs-property">@r</span> % <span class="hljs-number">1</span> <span class="hljs-keyword">is</span> <span class="hljs-number">0</span> <span class="hljs-keyword">then</span> Math.floor(<span class="hljs-property">@r</span>) <span class="hljs-keyword">else</span> <span class="hljs-property">@r</span>.toFixed <span class="hljs-number">2</span>
    i = <span class="hljs-keyword">if</span> <span class="hljs-property">@i</span> % <span class="hljs-number">1</span> <span class="hljs-keyword">is</span> <span class="hljs-number">0</span> <span class="hljs-keyword">then</span> Math.floor(<span class="hljs-property">@i</span>) <span class="hljs-keyword">else</span> <span class="hljs-property">@i</span>.toFixed <span class="hljs-number">2</span>
    <span class="hljs-keyword">if</span> r <span class="hljs-keyword">isnt</span> <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> i <span class="hljs-keyword">is</span> <span class="hljs-number">0</span>
      <span class="hljs-string">"<span class="hljs-subst">#{r}</span>"</span>
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> i <span class="hljs-keyword">isnt</span> <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> r <span class="hljs-keyword">is</span> <span class="hljs-number">0</span>
      <span class="hljs-keyword">if</span> i <span class="hljs-keyword">is</span> -<span class="hljs-number">1</span>
       <span class="hljs-string">"-i"</span>
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> i <span class="hljs-keyword">is</span> <span class="hljs-number">1</span>
        <span class="hljs-string">"i"</span>
      <span class="hljs-keyword">else</span> 
        <span class="hljs-string">"<span class="hljs-subst">#{i}</span>i"</span>
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> r <span class="hljs-keyword">isnt</span> <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> i <span class="hljs-keyword">isnt</span> <span class="hljs-number">0</span>
      <span class="hljs-string">"<span class="hljs-subst">#{r}</span> + <span class="hljs-subst">#{i}</span>i"</span>
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> r <span class="hljs-keyword">is</span> <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> i <span class="hljs-keyword">is</span> <span class="hljs-number">0</span>
      <span class="hljs-string">"0"</span></pre></div>
        
      
        
        <hr>
<h3 id="prototypical-instance-functions-">Prototypical Instance Functions:</h3>

        
      
        
        <p>These functions are attached to each instance of the <strong><code>Complex</code></strong> class - changing the function of one <strong><code>Complex</code></strong> changes the function on all other <strong><code>Complexes</code></strong> as well. These functions act on a <strong><code>Ket</code></strong> instance in place - the original object is modified.</p>

        
      
        
        <h3 id="-add-"><em>add:</em></h3>
<blockquote>
<p><strong><code>add</code></strong> adds another <strong><code>Complex</code></strong> number to the current <strong><code>Complex</code></strong>. </p>
</blockquote>

        
          <div class='highlight'><pre>  <span class="hljs-attribute">add</span>: <span class="hljs-function"><span class="hljs-params">(n)</span> -&gt;</span>
    c = <span class="hljs-keyword">new</span> Complex(n)
    <span class="hljs-property">@r</span> += c.r
    <span class="hljs-property">@i</span> += c.i
    <span class="hljs-keyword">this</span></pre></div>
        
      
        
        <h3 id="-subtract-"><em>subtract:</em></h3>
<blockquote>
<p><strong><code>subtract</code></strong> subtracts another <strong><code>Complex</code></strong> number from the current <strong><code>Complex</code></strong>.    </p>
</blockquote>

        
          <div class='highlight'><pre>  <span class="hljs-attribute">subtract</span>: <span class="hljs-function"><span class="hljs-params">(n)</span> -&gt;</span>
    c = <span class="hljs-keyword">new</span> Complex(n)
    <span class="hljs-property">@r</span> -= c.r
    <span class="hljs-property">@i</span> -= c.i
    <span class="hljs-keyword">this</span></pre></div>
        
      
        
        <h3 id="-multiply-"><em>multiply:</em></h3>
<blockquote>
<p><strong><code>multiply</code></strong> multiplies the current <strong><code>Complex</code></strong> by another <strong><code>Complex</code></strong> number.</p>
</blockquote>

        
          <div class='highlight'><pre>  <span class="hljs-attribute">multiply</span>: <span class="hljs-function"><span class="hljs-params">(n)</span> -&gt;</span>
    c = <span class="hljs-keyword">new</span> Complex(n)
    a = <span class="hljs-property">@r</span>
    b = <span class="hljs-property">@i</span>
    <span class="hljs-property">@r</span> = a * c.r - b * c.i
    <span class="hljs-property">@i</span> = b * c.r + a * c.i
    <span class="hljs-keyword">this</span></pre></div>
        
      
        
        <h3 id="-divide-"><em>divide:</em></h3>
<blockquote>
<p><strong><code>divide</code></strong> divides the current <strong><code>Complex</code></strong> by another <strong><code>Complex</code></strong> number.</p>
</blockquote>

        
          <div class='highlight'><pre>  <span class="hljs-attribute">divide</span>: <span class="hljs-function"><span class="hljs-params">(n)</span> -&gt;</span>
    c = <span class="hljs-keyword">new</span> Complex(n)
    <span class="hljs-keyword">if</span> c.r <span class="hljs-keyword">is</span> <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> c.i <span class="hljs-keyword">is</span> <span class="hljs-number">0</span>
      <span class="hljs-keyword">throw</span> ComplexMathError <span class="hljs-string">'Divide: argument `c` cannot be 0 + 0i.'</span>
    denominator = (c.r * c.r + c.i * c.i)
    a = <span class="hljs-property">@r</span>
    b = <span class="hljs-property">@i</span>
    <span class="hljs-property">@r</span> = (a * c.r + b * c.i) / denominator
    <span class="hljs-property">@i</span> = (b * c.r - a * c.i) / denominator
    <span class="hljs-keyword">this</span></pre></div>
        
      
        
        <h3 id="-exp-"><em>exp:</em></h3>
<blockquote>
<p><strong><code>exp</code></strong> returns <em>e</em> to the power of the current <strong><code>Complex</code></strong> number.</p>
</blockquote>

        
          <div class='highlight'><pre>  <span class="hljs-attribute">exp</span>:<span class="hljs-function"> -&gt;</span>
    <span class="hljs-property">@r</span> = Math.cos <span class="hljs-property">@i</span>
    <span class="hljs-property">@i</span> = Math.sin <span class="hljs-property">@i</span>
    <span class="hljs-keyword">this</span></pre></div>
        
      
        
        <h3 id="-mag-"><em>mag:</em></h3>
<blockquote>
<p><strong><code>mag</code></strong> returns the magnitude (Vector length) of the current <strong><code>Complex</code></strong> number.  </p>
</blockquote>

        
          <div class='highlight'><pre>  <span class="hljs-attribute">mag</span>:<span class="hljs-function"> -&gt;</span>
    Math.sqrt <span class="hljs-property">@r</span> * <span class="hljs-property">@r</span> + <span class="hljs-property">@i</span> * <span class="hljs-property">@i</span></pre></div>
        
      
        
        <h3 id="-conjugate-"><em>conjugate:</em></h3>
<blockquote>
<p><strong><code>conjugate</code></strong> returns the conjugate (negated complex part) of the current <strong><code>Complex</code></strong> number.  </p>
</blockquote>

        
          <div class='highlight'><pre>  <span class="hljs-attribute">conjugate</span>:<span class="hljs-function"> -&gt;</span>
    <span class="hljs-property">@i</span> *= -<span class="hljs-number">1</span>
    <span class="hljs-keyword">this</span></pre></div>
        
      
        
        <h3 id="-equals-"><em>equals:</em></h3>
<blockquote>
<p><strong><code>equals</code></strong> compares the current <strong><code>Complex</code></strong> number with another <strong><code>Complex</code></strong> to check for equality.</p>
</blockquote>

        
          <div class='highlight'><pre>  <span class="hljs-attribute">equals</span>: <span class="hljs-function"><span class="hljs-params">(n)</span> -&gt;</span>
    c = <span class="hljs-keyword">new</span> Complex(n)
    abs = Math.abs
    <span class="hljs-function"><span class="hljs-title">sign</span> = <span class="hljs-params">(val)</span> -&gt;</span>
      <span class="hljs-keyword">if</span> val &gt;= <span class="hljs-number">0</span> <span class="hljs-keyword">then</span> <span class="hljs-number">1</span> <span class="hljs-keyword">else</span> -<span class="hljs-number">1</span>
    <span class="hljs-keyword">if</span> sign(<span class="hljs-property">@r</span>) <span class="hljs-keyword">is</span> sign(c.r) <span class="hljs-keyword">and</span> sign(<span class="hljs-property">@i</span>) <span class="hljs-keyword">is</span> sign(c.i)
      diffR = abs(<span class="hljs-property">@r</span>) - abs(c.r)
      diffI = abs(<span class="hljs-property">@i</span>) - abs(c.i)
      <span class="hljs-keyword">if</span> -<span class="hljs-number">1e-10</span> &lt; diffR &lt; <span class="hljs-number">1e-10</span> <span class="hljs-keyword">and</span> -<span class="hljs-number">1e-10</span> &lt; diffI &lt; <span class="hljs-number">1e-10</span> <span class="hljs-keyword">then</span> <span class="hljs-literal">yes</span> <span class="hljs-keyword">else</span> <span class="hljs-literal">no</span>
    <span class="hljs-keyword">else</span> <span class="hljs-literal">no</span></pre></div>
        
      
        
        <hr>
<h3 id="static-functions-">Static Functions:</h3>

        
      
        
        <p>These functions belong to the <strong><code>Complex</code></strong> class - any object arguments are not modified and a new object is always returned.</p>

        
      
        
        <h3 id="-complex-add-"><em>Complex.Add:</em></h3>
<blockquote>
<p><strong><code>Complex.Add</code></strong> adds two <strong><code>Complex</code></strong> numbers together. </p>
</blockquote>

        
          <div class='highlight'><pre>  <span class="hljs-property">@Add</span>: <span class="hljs-function"><span class="hljs-params">(a, b)</span> -&gt;</span>
    a = <span class="hljs-keyword">new</span> Complex(a)
    b = <span class="hljs-keyword">new</span> Complex(b)
    a.add b</pre></div>
        
      
        
        <h3 id="-complex-subtract-"><em>Complex.Subtract:</em></h3>
<blockquote>
<p><strong><code>Complex.Subtract</code></strong> subtracts one <strong><code>Complex</code></strong> number from another <strong><code>Complex</code></strong>.    </p>
</blockquote>

        
          <div class='highlight'><pre>  <span class="hljs-property">@Subtract</span>: <span class="hljs-function"><span class="hljs-params">(a, b)</span> -&gt;</span>
    a = <span class="hljs-keyword">new</span> Complex(a)
    b = <span class="hljs-keyword">new</span> Complex(b)
    a.subtract b</pre></div>
        
      
        
        <h3 id="-complex-multiply-"><em>Complex.Multiply:</em></h3>
<blockquote>
<p><strong><code>Complex.Multiply</code></strong> multiplies one <strong><code>Complex</code></strong> by another <strong><code>Complex</code></strong> number.</p>
</blockquote>

        
          <div class='highlight'><pre>  <span class="hljs-property">@Multiply</span>: <span class="hljs-function"><span class="hljs-params">(a, b)</span> -&gt;</span>
    a = <span class="hljs-keyword">new</span> Complex(a)
    b = <span class="hljs-keyword">new</span> Complex(b)
    a.multiply b</pre></div>
        
      
        
        <h3 id="-complex-divide-"><em>Complex.Divide:</em></h3>
<blockquote>
<p><strong><code>Complex.Divide</code></strong> divides one <strong><code>Complex</code></strong> by another <strong><code>Complex</code></strong> number.</p>
</blockquote>

        
          <div class='highlight'><pre>  <span class="hljs-property">@Divide</span>: <span class="hljs-function"><span class="hljs-params">(a, b)</span> -&gt;</span>
    a = <span class="hljs-keyword">new</span> Complex(a)
    b = <span class="hljs-keyword">new</span> Complex(b)
    a.divide b</pre></div>
        
      
        
        <h3 id="-complex-exp-"><em>Complex.Exp:</em></h3>
<blockquote>
<p><strong><code>Complex.Exp</code></strong> returns <em>e</em> to the power of a <strong><code>Complex</code></strong> number.</p>
</blockquote>

        
          <div class='highlight'><pre>  <span class="hljs-property">@Exp</span>: <span class="hljs-function"><span class="hljs-params">(n)</span> -&gt;</span>
    c = <span class="hljs-keyword">new</span> Complex(n)
    c.exp()</pre></div>
        
      
        
        <h3 id="-complex-mag-"><em>Complex.Mag:</em></h3>
<blockquote>
<p><strong><code>omplex.Mag</code></strong> returns the magnitude (Vector length) of a <strong><code>Complex</code></strong> number.  </p>
</blockquote>

        
          <div class='highlight'><pre>  <span class="hljs-property">@Mag</span>: <span class="hljs-function"><span class="hljs-params">(n)</span> -&gt;</span>
    c = <span class="hljs-keyword">new</span> Complex(n)
    c.mag()</pre></div>
        
      
        
        <h3 id="-complex-conjugate-"><em>Complex.Conjugate:</em></h3>
<blockquote>
<p><strong><code>Complex.Conjugate</code></strong> returns the conjugate (negated complex part) of a <strong><code>Complex</code></strong> number.  </p>
</blockquote>

        
          <div class='highlight'><pre>  <span class="hljs-property">@Conjugate</span>: <span class="hljs-function"><span class="hljs-params">(n)</span> -&gt;</span>
    c = <span class="hljs-keyword">new</span> Complex(n)
    c.conjugate()</pre></div>
        
      
        
        <h3 id="-complex-equals-"><em>Complex.Equals:</em></h3>
<blockquote>
<p><strong><code>Complex.Equals</code></strong> compares two <strong><code>Complex</code></strong> numbers to check for equality.</p>
</blockquote>

        
          <div class='highlight'><pre>  <span class="hljs-property">@Equals</span>: <span class="hljs-function"><span class="hljs-params">(a, b)</span> -&gt;</span>
    a = <span class="hljs-keyword">new</span> Complex(a)
    b = <span class="hljs-keyword">new</span> Complex(b)
    a.equals b</pre></div>
        
      
        
        <hr>
<h2 id="exports-">Exports:</h2>

        
      
        
        <p>The <a href="#Complex"><strong><code>Complex</code></strong></a> class is added to the global <code>root</code> object, with the alias <a href="#complex"><strong><code>$C</code></strong></a>.    </p>

        
          <div class='highlight'><pre>root = <span class="hljs-built_in">exports</span> ? <span class="hljs-keyword">this</span>
root.$C = root.Complex = Complex</pre></div>
        
      
      <div class="fleur">h</div>
    </div>
  </div>
</body>
</html>
